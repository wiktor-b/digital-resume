---
import BaseLayout from "../layouts/BaseLayout.astro";
import Section from "../components/Section.astro";
import { profile, sidebarSections, work } from "../config/config";

const techStack =
  sidebarSections.find((s) => s.title === "Tech stack")?.items ?? [];
const softSkills =
  sidebarSections.find((s) => s.title === "Soft skills")?.items ?? [];
const languages =
  sidebarSections.find((s) => s.title === "Languages")?.items ?? [];
---

<BaseLayout title={`${profile.name} - Portfolio`}>
  <header
    class="border-b border-neutral-200 bg-white/80 backdrop-blur sticky top-0 z-50"
  >
    <div class="mx-auto max-w-6xl px-6 py-3 flex items-center justify-between">
      <div></div>
      <nav class="flex items-center gap-4 text-sm">
        <a
          href="/cv"
          class="px-3 py-1.5 rounded border border-neutral-300 hover:border-accent transition"
        >
          CV
        </a>
        <a
          href={profile.linkedin}
          target="_blank"
          rel="noreferrer"
          class="px-3 py-1.5 rounded hover:text-accent transition">LinkedIn</a
        >
        <a
          href={`mailto:${profile.email}`}
          class="px-3 py-1.5 rounded bg-accent text-white hover:brightness-95 transition"
        >
          Contact
        </a>
      </nav>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="bg-gradient-to-b from-white to-neutral-100">
      <div
        class="mx-auto max-w-6xl px-6 py-16 grid md:grid-cols-[220px_1fr] gap-8 items-center"
      >
        <div class="flex justify-center md:justify-start">
          <img
            src={profile.avatarUrl}
            alt={profile.name}
            class="w-44 h-44 rounded-full object-cover ring-4 ring-accent/60 shadow-md"
          />
        </div>
        <div>
          <h1
            class="font-heading text-4xl md:text-5xl font-extrabold tracking-wider"
          >
            {profile.name.toUpperCase()}
          </h1>
          <p class="text-neutral-700 mt-2 text-lg">
            {profile.role}
          </p>
          <p class="text-neutral-700 mt-4 max-w-3xl leading-relaxed">
            {profile.summary}
          </p>
          <div class="mt-6 flex flex-wrap gap-3">
            <a
              href="/cv"
              class="px-5 py-2.5 bg-accent text-white rounded shadow hover:brightness-95 transition"
            >
              View CV
            </a>
            <a
              href="#experience"
              class="px-5 py-2.5 border border-neutral-300 rounded hover:border-accent transition"
            >
              Experience
            </a>
            <a
              href={`mailto:${profile.email}`}
              class="px-5 py-2.5 rounded bg-neutral-900 text-white hover:bg-neutral-800 transition"
            >
              Get in touch
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Skills -->
    <section class="mx-auto max-w-6xl px-6 py-12">
      <Section title="Skills" icon="learning">
        <div class="grid md:grid-cols-3 gap-8 mt-2">
          <div
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm"
          >
            <h3 class="font-semibold mb-3">Tech stack</h3>
            <div class="flex flex-wrap gap-2">
              {
                techStack.map((t) => (
                  <span class="px-2.5 py-1 text-xs rounded-full bg-neutral-100 border border-neutral-200">
                    {t}
                  </span>
                ))
              }
            </div>
          </div>
          <div
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm"
          >
            <h3 class="font-semibold mb-3">Soft skills</h3>
            <ul class="list-disc pl-5 text-sm space-y-1">
              {softSkills.map((s) => <li>{s}</li>)}
            </ul>
          </div>
          <div
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm"
          >
            <h3 class="font-semibold mb-3">Languages</h3>
            <ul class="list-disc pl-5 text-sm space-y-1">
              {languages.map((l) => <li>{l}</li>)}
            </ul>
          </div>
        </div>
      </Section>
    </section>

    <!-- Experience highlights -->
    <section id="experience" class="mx-auto max-w-6xl px-6 py-8">
      <Section title="Experience" icon="briefcase">
        <div class="grid md:grid-cols-3 gap-6 mt-2">
          {
            work.map((w) => (
              <article class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm flex flex-col gap-1.5">
                <div class="text-sm text-neutral-600">{w.period}</div>
                <div class="text-lg font-semibold text-neutral-700">
                  {w.role || w.company}
                </div>
                <h3 class="text-md">{w.role && w.company}</h3>
                {w.tech && (
                  <div class="text-xs text-neutral-600">
                    {w.tech.split("<br>").map((t) => (
                      <div>{t}</div>
                    ))}
                  </div>
                )}
                <ul class="list-disc pl-5 text-sm space-y-1">
                  {w.bullets.slice(0, 2).map((b) => (
                    <li>{b}</li>
                  ))}
                </ul>
                <div class="pt-3 border-t border-neutral-200 mt-auto">
                  <a href="/cv" class="text-sm text-accent underline">
                    See CV →
                  </a>
                </div>
              </article>
            ))
          }
        </div>
      </Section>
    </section>

    <!-- Contact -->
    <section class="mx-auto max-w-6xl px-6 py-12">
      <Section title="Contact" icon="new-post">
        <div class="grid md:grid-cols-3 gap-6 mt-2">
          <a
            href={`mailto:${profile.email}`}
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm flex items-center gap-3 hover:border-accent transition"
          >
            <img
              width="24"
              height="24"
              src="https://img.icons8.com/sf-regular-filled/48/new-post.png"
              alt="email"
            />
            <div>
              <div class="text-sm text-neutral-600">Email</div>
              <div class="font-medium">{profile.email}</div>
            </div>
          </a>
          <a
            href={profile.linkedin}
            target="_blank"
            rel="noreferrer"
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm flex items-center gap-3 hover:border-accent transition"
          >
            <img
              width="24"
              height="24"
              src="https://img.icons8.com/sf-regular-filled/48/linkedin.png"
              alt="linkedin"
            />
            <div>
              <div class="text-sm text-neutral-600">LinkedIn</div>
              <div class="font-medium break-all">{profile.linkedin}</div>
            </div>
          </a>
          <div
            class="p-5 rounded-lg border border-neutral-200 bg-white shadow-sm flex items-center gap-3"
          >
            <img
              width="24"
              height="24"
              src="https://img.icons8.com/sf-regular-filled/48/address.png"
              alt="address"
            />
            <div>
              <div class="text-sm text-neutral-600">Location</div>
              <div class="font-medium">{profile.location}</div>
            </div>
          </div>
        </div>
      </Section>
    </section>
  </main>

  <footer
    class="py-8 border-t border-neutral-200 text-center text-sm text-neutral-600"
  >
    <div class="mx-auto max-w-6xl px-6">
      © {new Date().getFullYear()}
      {profile.name}. Built with Astro + Tailwind.
    </div>
  </footer>
</BaseLayout>
